(this["webpackJsonpcard-maker"]=this["webpackJsonpcard-maker"]||[]).push([[0],{13:function(e,t,a){e.exports={makerBlack:"#000000",makerWhite:"#ffffff",form:"card_edit_form_form__39ZCC",input:"card_edit_form_input__3QOSZ",textarea:"card_edit_form_textarea__1NLFr",select:"card_edit_form_select__2fQ4e",buttton:"card_edit_form_buttton__1yDqK",fileInput:"card_edit_form_fileInput__1xjmG"}},14:function(e,t,a){e.exports={makerBlack:"#000000",makerWhite:"#ffffff",form:"card_add_form_form__NzjmF",input:"card_add_form_input__1BiAZ",textarea:"card_add_form_textarea__3xnNV",select:"card_add_form_select__3SlBu",buttton:"card_add_form_buttton__3VhKB",fileInput:"card_add_form_fileInput__2X9vP"}},20:function(e,t,a){e.exports={makerLightGrey:"#e8e7e6",makerMagenta:"#ff00ff",makerLightSlateGray:"#778899",container:"image_file_input_container__rw2zH",input:"image_file_input_input__2zPbj",button:"image_file_input_button__3vGjD",blue:"image_file_input_blue__TITAP",loading:"image_file_input_loading__cFdLI",spin:"image_file_input_spin__2Gfg1"}},22:function(e,t,a){e.exports={makerGreen:"#385461",makerWhite:"#ffffff",makerBlack:"#000000",header:"header_header__CkwlO",title:"header_title__VXl_c",logout:"header_logout__1RRLD"}},26:function(e,t,a){e.exports={makerGreen:"#385461",makerWhite:"#ffffff",makerLightPink:"#ffeae8",login:"login_login__3a569",btn:"login_btn__153R4"}},27:function(e,t,a){e.exports={makerGreen:"#385461",preview:"preview_preview__2H_DQ",title:"preview_title__3NN0m",cards:"preview_cards__1mvrH"}},32:function(e,t,a){e.exports={makerGreen:"#385461",makerWhite:"#ffffff",footer:"footer_footer__1YZUN",title:"footer_title__1huUK"}},35:function(e,t,a){e.exports={makerGreen:"#385461",makerLightGrey:"#e8e7e6",editor:"editor_editor__3mwc8",title:"editor_title__1RXrI"}},36:function(e,t,a){e.exports={mediaQuery:"62rem",makerWhite:"#ffffff",maker:"maker_maker__Gj104",container:"maker_container__BTtTb"}},39:function(e,t,a){e.exports={makerGrey:"#626262",app:"app_app__2uP9Y"}},41:function(e,t,a){e.exports={makerGreen:"#385461",makerWhite:"#ffffff",button:"button_button__9Zfzm"}},46:function(e,t,a){},59:function(e,t,a){"use strict";a.r(t);var n=a(10),r=a(2),c=a.n(r),i=a(38),s=a.n(i),o=(a(46),a(23)),l=a(5),u=a(39),f=a.n(u),d=a(32),m=a.n(d),j=a(1),_=function(e){return Object(j.jsx)("footer",{className:m.a.footer,children:Object(j.jsx)("h2",{className:m.a.title,children:"Code Your Dream"})})},p=a(22),b=a.n(p),h=function(e){var t=e.onLogout;return Object(j.jsxs)("header",{className:b.a.header,children:[t&&Object(j.jsx)("button",{className:b.a.logout,onClick:t,children:"Logout"}),Object(j.jsx)("img",{className:b.a.logo,src:"./images/logo.png",alt:"logo"}),Object(j.jsx)("h1",{className:b.a.title,children:"Business Card Maker"})]})},O=a(26),x=a.n(O),v=function(e){var t=e.authService,a=Object(l.f)(),n=function(e){a.push({pathname:"/maker",state:{id:e}})},c=function(e){t.login(e.currentTarget.textContent).then((function(e){return n(e.user.uid)}))};return Object(r.useEffect)((function(){t.onAuthChange((function(e){e&&n(e.uid)}))})),Object(j.jsxs)("section",{className:x.a.login,children:[Object(j.jsx)(h,{}),Object(j.jsxs)("section",{children:[Object(j.jsx)("h2",{children:"login"}),Object(j.jsxs)("ul",{children:[Object(j.jsx)("li",{children:Object(j.jsx)("button",{className:x.a.btn,onClick:c,children:"Google"})}),Object(j.jsx)("li",{children:Object(j.jsx)("button",{className:x.a.btn,onClick:c,children:"Github"})})]})]}),Object(j.jsx)(_,{})]})},g=a(15),k=a(24),N=a(13),C=a.n(N),y=a(41),w=a.n(y),R=function(e){var t=e.name,a=e.onClick;return Object(j.jsx)("button",{className:w.a.button,onClick:a,children:t})},G=function(e){var t=e.card,a=e.updateCard,c=e.deleteCard,i=e.FileInput,s=t.name,o=t.theme,l=t.title,u=t.email,f=t.fileName,d=t.company,m=Object(r.useRef)(""),_=Object(r.useRef)(""),p=Object(r.useRef)(),b=Object(r.useRef)(""),h=Object(r.useRef)(""),O=Object(r.useRef)(""),x=function(e){null!=e.currentTarget&&(e.preventDefault(),a(Object(n.a)(Object(n.a)({},t),{},Object(k.a)({},e.currentTarget.name,e.currentTarget.value))))};return Object(j.jsxs)("form",{className:C.a.form,children:[Object(j.jsx)("input",{className:C.a.input,ref:m,type:"text",name:"name",value:s,onChange:x}),Object(j.jsx)("input",{className:C.a.input,ref:_,type:"text",name:"company",value:d,onChange:x}),Object(j.jsxs)("select",{className:C.a.select,ref:p,name:"theme",value:o,onChange:x,children:[Object(j.jsx)("option",{value:"light",children:"Light"}),Object(j.jsx)("option",{value:"dark",children:"Dark"}),Object(j.jsx)("option",{value:"colorful",children:"Colorful"})]}),Object(j.jsx)("input",{className:C.a.input,ref:b,type:"text",name:"title",value:l,onChange:x}),Object(j.jsx)("input",{className:C.a.input,ref:h,type:"text",name:"email",value:u,onChange:x}),Object(j.jsx)("textarea",{className:C.a.textarea,ref:O,name:"message",onChange:x}),Object(j.jsx)("div",{className:C.a.fileInput,children:Object(j.jsx)(i,{name:f,onFileChange:function(e){a(Object(n.a)(Object(n.a)({},t),{},{fileName:e.name,fileURL:e.url}))}})}),Object(j.jsx)(R,{name:"Delete",onClick:function(e){e.preventDefault(),c(t)}})]})},I=a(14),L=a.n(I),F=function(e){var t=e.onAdd,a=e.FileInput,n=Object(r.useRef)(),c=Object(r.useRef)(),i=Object(r.useRef)(),s=Object(r.useRef)(),o=Object(r.useRef)(),l=Object(r.useRef)(),u=Object(r.useRef)(),f=Object(r.useState)({fileName:null,fileURL:null}),d=Object(g.a)(f,2),m=d[0],_=d[1];return Object(j.jsxs)("form",{className:L.a.form,ref:n,children:[Object(j.jsx)("input",{className:L.a.input,ref:c,type:"text",name:"name",placeholder:"Name"}),Object(j.jsx)("input",{className:L.a.input,ref:i,type:"text",name:"company",placeholder:"Company"}),Object(j.jsxs)("select",{className:L.a.select,ref:u,name:"theme",children:[Object(j.jsx)("option",{value:"light",children:"Light"}),Object(j.jsx)("option",{value:"dark",children:"Dark"}),Object(j.jsx)("option",{value:"colorful",children:"Colorful"})]}),Object(j.jsx)("input",{className:L.a.input,ref:s,type:"text",name:"title",placeholder:"title"}),Object(j.jsx)("input",{className:L.a.input,ref:o,type:"text",name:"email",placeholder:"email"}),Object(j.jsx)("textarea",{className:L.a.textarea,ref:l,name:"message"}),Object(j.jsx)("div",{className:L.a.fileInput,children:Object(j.jsx)(a,{name:m.fileName,onFileChange:function(e){console.log(e),_({fileName:e.name,fileURL:e.url})}})}),Object(j.jsx)(R,{name:"Add",onClick:function(e){e.preventDefault();var a={id:Date.now(),name:c.current.value,company:i.current.value,theme:u.current.value,title:s.current.value,email:o.current.value,message:l.current.value,fileName:m.fileName||"",fileURL:m.fileURL||""};t(a),n.current.reset(),_({fileName:null,fileURL:null})}})]})},D=a(35),S=a.n(D),A=function(e){var t=e.cards,a=e.onAdd,n=e.updateCard,r=e.deleteCard,c=e.FileInput;return Object(j.jsxs)("section",{className:S.a.editor,children:[Object(j.jsx)("h3",{className:S.a.title,children:"Card Maker"}),Object.keys(t).map((function(e){return Object(j.jsx)(G,{card:t[e],updateCard:n,deleteCard:r,FileInput:c},e)})),Object(j.jsx)(F,{cards:t,onAdd:a,FileInput:c})]})},P=a(9),U=a.n(P),z=function(e){switch(e){case"light":return U.a.light;case"dark":return U.a.dark;case"colorful":return U.a.colorful;default:throw new Error("unkown theme : ".concat(e))}},B=function(e){var t=e.card,a=t.id,n=t.name,r=t.title,c=t.theme,i=t.email,s=t.fileURL,o=t.company,l=t.message,u=s||"./images/default_logo.png";return Object(j.jsxs)("li",{className:"".concat(U.a.card," ").concat(z(c)),children:[Object(j.jsx)("img",{className:U.a.avatar,src:u,alt:"profile img"}),Object(j.jsxs)("div",{className:U.a.info,children:[Object(j.jsx)("h3",{className:U.a.name,children:n}),Object(j.jsx)("p",{className:U.a.company,children:o}),Object(j.jsx)("p",{className:U.a.title,children:r}),Object(j.jsx)("p",{className:U.a.email,children:i}),Object(j.jsx)("p",{className:U.a.message,children:l})]})]},a)},W=a(27),T=a.n(W),E=function(e){var t=e.cards;return Object(j.jsxs)("section",{className:T.a.preview,children:[Object(j.jsx)("h3",{className:T.a.title,children:"Card Preview"}),Object(j.jsx)("ul",{className:T.a.cards,children:Object.keys(t).map((function(e){return Object(j.jsx)(B,{card:t[e]},e)}))})]})},M=a(36),Q=a.n(M),V=function(e){var t,a=e.authService,c=e.FileInput,i=e.cardRepository,s=Object(l.f)(),o=null===s||void 0===s||null===(t=s.location)||void 0===t?void 0:t.state,u=Object(r.useState)({}),f=Object(g.a)(u,2),d=f[0],m=f[1],p=Object(r.useState)(o&&o.id),b=Object(g.a)(p,2),O=b[0],x=b[1];Object(r.useEffect)((function(){if(O){var e=i.syncCards(O,(function(e){m(e)}));return function(){return e()}}}),[O,i]),Object(r.useEffect)((function(){a.onAuthChange((function(e){e?x(e.uid):s.push("/")}))}),[a,O,s]);var v=function(e){m((function(t){var a=Object(n.a)({},t);return a[e.id]=e,a})),i.saveCard(O,e)};return Object(j.jsxs)("section",{className:Q.a.maker,children:[Object(j.jsx)(h,{onLogout:function(){a.logout()}}),Object(j.jsxs)("div",{className:Q.a.container,children:[Object(j.jsx)(A,{cards:d,onAdd:v,updateCard:v,deleteCard:function(e){m((function(t){var a=Object(n.a)({},t);return delete a[e.id],a})),i.removeCard(O,e)},FileInput:c}),Object(j.jsx)(E,{cards:d})]}),Object(j.jsx)(_,{})]})};var Z=function(e){var t=e.authService,a=e.FileInput,n=e.cardRepository;return Object(j.jsx)("div",{className:f.a.app,children:Object(j.jsx)(o.a,{children:Object(j.jsxs)(l.c,{children:[Object(j.jsx)(l.a,{exact:!0,path:"/",children:Object(j.jsx)(v,{authService:t})}),Object(j.jsx)(l.a,{path:"/maker",children:Object(j.jsx)(V,{authService:t,FileInput:a,cardRepository:n})})]})})})},q=a(17),H=a(18),J=a(28),K=(a(52),a(54),J.a.initializeApp({apiKey:"AIzaSyDGDx66afEyNac9weF8JyUV76sx8DoGsPA",authDomain:"business-card-maker-ac97e.firebaseapp.com",databaseURL:"https://business-card-maker-ac97e-default-rtdb.firebaseio.com",projectId:"business-card-maker-ac97e"})),X=K.auth(),Y=K.database(),$=new J.a.auth.GoogleAuthProvider,ee=new J.a.auth.GithubAuthProvider,te=function(){function e(){Object(q.a)(this,e)}return Object(H.a)(e,[{key:"login",value:function(e){var t=this.getProvider(e);return X.signInWithPopup(t)}},{key:"logout",value:function(){X.signOut()}},{key:"onAuthChange",value:function(e){X.onAuthStateChanged((function(t){e(t)}))}},{key:"getProvider",value:function(e){switch(e){case"Google":return $;case"Github":return ee;default:throw new Error("not supported provider: ".concat(e))}}}]),e}(),ae=a(19),ne=a.n(ae),re=a(25),ce=function(){function e(){Object(q.a)(this,e)}return Object(H.a)(e,[{key:"upload",value:function(){var e=Object(re.a)(ne.a.mark((function e(t){var a,n;return ne.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(a=new FormData).append("file",t),a.append("upload_preset","bzzul38y"),e.next=5,fetch("https://api.cloudinary.com/v1_1/dqtqttxxs/image/upload",{method:"POST",body:a});case 5:return n=e.sent,e.next=8,n.json();case 8:return e.abrupt("return",e.sent);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}]),e}(),ie=a(20),se=a.n(ie),oe=function(e){var t=e.imageUploader,a=e.name,n=e.onFileChange,c=Object(r.useRef)(),i=Object(r.useState)(!1),s=Object(g.a)(i,2),o=s[0],l=s[1],u=function(e){e.preventDefault(),c.current.click()},f=function(){var e=Object(re.a)(ne.a.mark((function e(a){var r;return ne.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l(!0),e.next=3,t.upload(a.target.files[0]);case 3:r=e.sent,n({name:r.original_filename,url:r.url}),l(!1);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(j.jsxs)("div",{className:se.a.container,children:[Object(j.jsx)("input",{className:se.a.input,ref:c,type:"file",accept:"image/*",name:"file",onChange:f}),!o&&Object(j.jsx)("button",{className:"".concat(se.a.button," ").concat(a&&se.a.blue),onClick:u,children:a||"No image"}),o&&Object(j.jsx)("button",{className:se.a.loading,onClick:u})]})},le=function(){function e(){Object(q.a)(this,e)}return Object(H.a)(e,[{key:"syncCards",value:function(e,t){var a=Y.ref("".concat(e,"/cards"));return a.on("value",(function(e){var a=e.val();a&&t(a)})),function(){return a.off()}}},{key:"saveCard",value:function(e,t){Y.ref("".concat(e,"/cards/").concat(t.id)).set(t)}},{key:"removeCard",value:function(e,t){Y.ref("".concat(e,"/cards/").concat(t.id)).remove()}}]),e}(),ue=new te,fe=new le,de=new ce;s.a.render(Object(j.jsxs)(c.a.StrictMode,{children:[Object(j.jsx)(Z,{authService:ue,FileInput:function(e){return Object(j.jsx)(oe,Object(n.a)(Object(n.a)({},e),{},{imageUploader:de}))},cardRepository:fe})," "]}),document.getElementById("root"))},9:function(e,t,a){e.exports={makerBlack:"#000000",makerWhite:"#ffffff",makerWheat:"#f5deb3",card:"card_card__2VEeM",light:"card_light__SONGd",dark:"card_dark__3jzCC",colorful:"card_colorful__3klr3",avatar:"card_avatar__H-hCu",info:"card_info__2wjFP",name:"card_name__lzM0w",title:"card_title__1lzGQ",email:"card_email__37cqk",company:"card_company__2Jzlv",message:"card_message__21PN0"}}},[[59,1,2]]]);
//# sourceMappingURL=main.a781782d.chunk.js.map